{"ast":null,"code":"import _classCallCheck from\"D:\\\\Work\\\\AccionSocial\\\\app\\\\frontend\\\\accion_social\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\Work\\\\AccionSocial\\\\app\\\\frontend\\\\accion_social\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\Work\\\\AccionSocial\\\\app\\\\frontend\\\\accion_social\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\Work\\\\AccionSocial\\\\app\\\\frontend\\\\accion_social\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import{setUserSession}from'../utils/Commons';import{Button,TextField,Grid,Card,CardHeader,CardContent}from'@material-ui/core';import conn from'../ServiceConexion';//para deploy\n//const API_PATH = '/accion_social/backend';\n//Para localhost\n//const API_PATH = 'http://localhost/accion_social/backend';\nvar Login=/*#__PURE__*/function(_React$Component){_inherits(Login,_React$Component);var _super=_createSuper(Login);function Login(){var _this;_classCallCheck(this,Login);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={usuario:'',clave:'',loading:false,error:null};_this.handleFormSubmit=function(e){//const config = {headers : {\"Access-Control-Allow-Origin\":\"*\"}};\n// axios({\n//     method: 'post',\n//     url: `${API_PATH}/login`,\n//     headers: { 'content-type': 'application/json' },\n//     data: { user: this.state.usuario, pass: this.state.clave }\n// })\nconn.login(_this.state.usuario,_this.state.clave).then(function(response){if(response.data.error){_this.setState({error:response.data.error});}else{_this.setState({loading:false});setUserSession(response.data.token,response.data.user);//this.props.history.push('/accion_social');\nvar loggedIn=true;_this.props.onLoggedIn(loggedIn);}}).catch(function(error){console.error(error);});};return _this;}_createClass(Login,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(\"div\",{className:\"Login\"},/*#__PURE__*/React.createElement(Card,{className:\"Card\"},/*#__PURE__*/React.createElement(CardHeader,{color:\"#fff\",title:\"Acci\\xF3n Social - Inicio de Sesi\\xF3n\"}),/*#__PURE__*/React.createElement(CardContent,null,/*#__PURE__*/React.createElement(Grid,{container:true,spacing:3,item:true,xs:12},/*#__PURE__*/React.createElement(Grid,{item:true,xs:12},/*#__PURE__*/React.createElement(TextField,{id:\"txtUsuario\",fullWidth:true,name:\"usuario\",label:\"Usuario\",value:this.state.usuario,onChange:function onChange(e){return _this2.setState({usuario:e.target.value});}})),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12},/*#__PURE__*/React.createElement(TextField,{id:\"txtClave\",fullWidth:true,name:\"clave\",type:\"password\",label:\"Contrase\\xF1a\",value:this.state.clave,onChange:function onChange(e){return _this2.setState({clave:e.target.value});}})),this.state.error&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"small\",{style:{color:'red'}},this.state.error),/*#__PURE__*/React.createElement(\"br\",null)),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12},/*#__PURE__*/React.createElement(Button,{onClick:this.handleFormSubmit,disabled:this.state.loading,variant:\"contained\",className:\"LoginBtn\",color:\"primary\"},this.state.loading?'Cargando...':'Ingresar'))))));}}]);return Login;}(React.Component);export default Login;","map":{"version":3,"sources":["D:/Work/AccionSocial/app/frontend/accion_social/src/paginas/Login.js"],"names":["React","setUserSession","Button","TextField","Grid","Card","CardHeader","CardContent","conn","Login","state","usuario","clave","loading","error","handleFormSubmit","e","login","then","response","data","setState","token","user","loggedIn","props","onLoggedIn","catch","console","target","value","color","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { setUserSession } from '../utils/Commons';\r\nimport { Button, TextField, Grid, Card, CardHeader, CardContent } from '@material-ui/core';\r\nimport conn from '../ServiceConexion';\r\n\r\n//para deploy\r\n//const API_PATH = '/accion_social/backend';\r\n//Para localhost\r\n//const API_PATH = 'http://localhost/accion_social/backend';\r\n\r\nclass Login extends React.Component {\r\n    \r\n    state = {\r\n            usuario: '',\r\n            clave: '',\r\n            loading: false,\r\n            error: null\r\n        };\r\n\r\n    handleFormSubmit = e => {\r\n        //const config = {headers : {\"Access-Control-Allow-Origin\":\"*\"}};\r\n        // axios({\r\n        //     method: 'post',\r\n        //     url: `${API_PATH}/login`,\r\n        //     headers: { 'content-type': 'application/json' },\r\n        //     data: { user: this.state.usuario, pass: this.state.clave }\r\n        // })\r\n\r\n        conn.login(this.state.usuario, this.state.clave)\r\n            .then( response => {\r\n                                  if (response.data.error) {\r\n                                      this.setState({error : response.data.error});\r\n                                  }\r\n                                  else {\r\n                                      this.setState({loading:false});\r\n                                      setUserSession(response.data.token, response.data.user);\r\n                                      //this.props.history.push('/accion_social');\r\n                                      const loggedIn = true;\r\n                                      this.props.onLoggedIn(loggedIn);\r\n                                  }\r\n                               })\r\n            .catch( error => { console.error(error) } );\r\n    };\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"Login\">\r\n                {/*<h2>Acción Social - Inicio de Sesión</h2>*/}\r\n                <Card className=\"Card\" >\r\n                    <CardHeader color=\"#fff\" title=\"Acción Social - Inicio de Sesión\" />\r\n                    <CardContent>\r\n                        <Grid container spacing={3} item xs={12}>\r\n                            {/*<form onSubmit={this.handleSubmit}>*/}\r\n                            <Grid item xs={12}>\r\n                                <TextField id=\"txtUsuario\" fullWidth name=\"usuario\" label=\"Usuario\" value={this.state.usuario} onChange={e => this.setState({ usuario: e.target.value })} ></TextField>\r\n                            </Grid>   \r\n                            <Grid item xs={12}> \r\n                                <TextField id=\"txtClave\" fullWidth name=\"clave\" type=\"password\" label=\"Contraseña\" value={this.state.clave} onChange={e => this.setState({ clave: e.target.value })} ></TextField>\r\n                            </Grid>\r\n                            {/*<label>Usuario</label>\r\n                            <input type=\"text\" id=\"txtUsuario\" name=\"usuario\" placeholder=\"Usuario\" value={this.state.usuario} onChange={e => this.setState({ usuario: e.target.value })}/>\r\n                            <label>Contraseña</label>\r\n                            <input type=\"password\" id=\"txtClave\" name=\"clave\" placeholder=\"Contraseña\" value={this.state.clave} onChange={e => this.setState({ clave: e.target.value })} />*/}\r\n                            {/*<input type=\"button\" value=\"Ingresar\" onClick={e => this.handleFormSubmit(e)} />*/}\r\n                    \r\n                \r\n                            {this.state.error && <><small style={{ color: 'red' }}>{ this.state.error }</small><br /></>}<br />\r\n                            {/*<input type=\"button\" value={ this.state.loading ? 'Cargando...' : 'Ingresar'} onClick={ this.handleFormSubmit } disabled={ this.state.loading } /><br />*/}\r\n                            <Grid item xs={12}>   \r\n                                <Button onClick={ this.handleFormSubmit } disabled={ this.state.loading }  variant=\"contained\" className=\"LoginBtn\" color=\"primary\" >{ this.state.loading ? 'Cargando...' : 'Ingresar'}</Button>\r\n                            </Grid>\r\n                        </Grid>\r\n                    </CardContent>    \r\n                </Card>\r\n            </div>\r\n            );\r\n    }\r\n}\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}